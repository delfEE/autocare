<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600&amp;subset=latin,cyrillic" rel="stylesheet">
    <link rel="stylesheet" href="{{site.baseurl}}/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izimodal/1.5.1/css/iziModal.min.css">
    <title>Autocare base template</title>
</head>
<body>
 
 {% include header.html %}

 <section class="site-jumbotron">
     <div class="container">
        <div class="site-jumbotron-bg">
            <h1>Автохимия и автокосметика</h1>
        </div>
     </div>
 </section>
{% include nav.html %}

<div class="container">
    {{content}}
</div>


<!-- Modal structure -->
<div id="modal">
    
</div>


 <footer class="main-footer">
    <div class="container">
        <p>©2017 Autocare.com.ua. All rights reserved.</p>
    </div> 
 </footer>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/izimodal/1.5.1/js/iziModal.min.js"></script>
 <script src="{{site.baseurl}}/scripts/validator.min.js"></script>
 <script>
     $("#modal").iziModal({
        title: 'Заказать товар',
        headerColor: '#262d31',
        width: 1000,
     });


     var el;
    $( document ).on("click", ".grid-item", function( event ) {
        el = $(event.currentTarget).next();
        $('#modal').iziModal('setContent', {
            content: el.html()
        });
    });



    $(document).on('click', '.submit-btn', function(e) {
        e.preventDefault();
        var phone = $(this).parents('.main-form').find('input[name="phone"]');
        var name = $(this).parents('.main-form').find('input[name="name"]');
        var email = $(this).parents('.main-form').find('input[name="email"]');



        var checkPhone = validator.isMobilePhone(phone.val(),'uk-UA');
        var checkName = !validator.isEmpty(name.val());
        var checkEmail = validator.isEmail(email.val());

        if (!checkName) {
            $(name).css("border-bottom-color", "red");
        }else {
            $(name).css("border-bottom-color", "transparent");
        }

        if (!checkPhone) {
            $(phone).css("border-bottom-color", "red");
        }else {
            $(phone).css("border-bottom-color", "transparent");
        }

        if (!checkEmail) {
            $(email).css("border-bottom-color", "red");
        }else {
            $(email).css("border-bottom-color", "transparent");
        }

        

        if (checkPhone && checkName && checkEmail) {
            $(this).parents('form').hide();

            $(this).parents('.main-form').find('.after-form').addClass('show');

            // $.ajax({
            //     url: "https://formspree.io/delf.faith@gmail.com", 
            //     method: "POST",
            //     data: $(this).parents('form').serializeArray(),
            //     dataType: "json",
            //     success: function () {
            //         $(this).parents('form')
            //     }
            // })
        }
    });

    $(document).on('click', '.make-order', function() {
        var form = $(this).parents('.modal-content-info').next();
        form.addClass('show');
    });

    $(document).on('click', '#cancel-order', function(e) {
        e.preventDefault();
        var form = $(this).parents('.main-form');
        form.removeClass('show');
    });

    $(document).on('click', '.btn-ok', function(e) {
        e.preventDefault();
        var form = $(this).parents('.main-form');
        form.removeClass('show');

        setTimeout(function() {
            $('form').show();
            $('.after-form').removeClass('show');
        }, 300);
    });



 </script>
</body>
</html>
